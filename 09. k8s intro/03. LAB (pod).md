# K8S Pod

**Важно**: если вы **не подняли** локальный registry (`registry.local:5000`), то во всех yml замените `image` на:
* `ghcr.io/coursar/docker-27.10.25/app-boot:1.0.0` для версии 1.0.0
* `ghcr.io/coursar/docker-27.10.25/app-boot:2.0.0` для версии 2.0.0

В противном случае, убедитесь, что ваш локальный реестр доступен и содержит необходимые образа:

```sh
docker container ls | grep registry

skopeo list-tags docker://registry.local:5000/library/app-boot
```

Ожидается вывод:

```json
{
    "Repository": "registry.local:5000/library/app-boot",
    "Tags": [
        "1.0.0",
        "2.0.0"
    ]
}
```

## Шаг 0. Подключение

Удостоверьтесь, что можете с помощью `kubectl` получить информацию о кластере:

```sh
kubectl cluster-info
```

## Шаг 1. Работа с Pod'ом

Получите список существующих Pod'ов в Namespace `appns`:

```sh
kubectl -n appns get pods
```

Ожидается следующая строка (это значит, что ресурсов нет):

```
No resources found in appns namespace.
```

Создайте pod (Namespace уже прописан в yml):

```sh
kubectl apply -f 03_pod.yml
```

Получите список Pod'ов:

```sh
kubectl -n appns get pods
```

Получите детали по Pod'у:

```sh
kubectl -n appns describe pod app
```

Пробросьте порты для локального доступа к Pod'у:

```sh
kubectl -n appns port-forward app 8080:8080
```

Обратитесь через браузер по адресу: http://localhost:8080/actuator/info

Остановите Forwarding Port'ов через `Ctrl + C`

Удалите Pod:

```sh
kubectl delete -f 03_pod.yml
```